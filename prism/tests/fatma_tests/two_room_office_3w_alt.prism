// 6  3,4  3
// 0<->1<->2 
// 5 5,6   4
mdp
 
module M 
 
waypoint:[0..6] init 1;
door_edge0:[-1..1] init -1;
door_edge1:[-1..1] init -1;

[doorPassing_WayPoint1_WayPoint0] (waypoint=1) & (door_edge0=1) -> 1.0:(waypoint'=0);
[doorPassing_WayPoint1_WayPoint2] (waypoint=1) & (door_edge1=1) -> 1.0:(waypoint'=2);

[move_WayPoint1_WayPoint3] (waypoint=1) -> 0.1:(waypoint'=4) + 0.9:(waypoint'=3);
[move_WayPoint1_WayPoint4] (waypoint=1) -> 0.1:(waypoint'=6) + 0.9:(waypoint'=4);
[move_WayPoint1_WayPoint5] (waypoint=1) -> 0.1:(waypoint'=6) + 0.9:(waypoint'=5);
[move_WayPoint1_WayPoint6] (waypoint=1) -> 0.1:(waypoint'=5) + 0.9:(waypoint'=6);

[move_WayPoint6_WayPoint1] (waypoint=6) -> 1.0:(waypoint'=1);
[move_WayPoint5_WayPoint1] (waypoint=5) -> 1.0:(waypoint'=1);
[move_WayPoint4_WayPoint1] (waypoint=4) -> 1.0:(waypoint'=1);
[move_WayPoint3_WayPoint1] (waypoint=3) -> 1.0:(waypoint'=1);


[move_WayPoint6_WayPoint0] (waypoint=6) -> 1.0:(waypoint'=0);
[move_WayPoint5_WayPoint0] (waypoint=5) -> 1.0:(waypoint'=0);
[move_WayPoint4_WayPoint2] (waypoint=4) -> 1.0:(waypoint'=2);
[move_WayPoint3_WayPoint2] (waypoint=3) -> 1.0:(waypoint'=2);

[move_WayPoint0_WayPoint6] (waypoint=0) -> 1.0:(waypoint'=6);
[move_WayPoint0_WayPoint5] (waypoint=0) -> 1.0:(waypoint'=5);
[move_WayPoint2_WayPoint4] (waypoint=2) -> 1.0:(waypoint'=4);
[move_WayPoint2_WayPoint3] (waypoint=2) -> 1.0:(waypoint'=3);

[doorPassing_WayPoint2_WayPoint1] (waypoint=2) & (door_edge1=1) -> 1.0:(waypoint'=1);
[doorPassing_WayPoint0_WayPoint1] (waypoint=0) & (door_edge0=1) -> 1.0:(waypoint'=1);

[check_door0] (waypoint=0) & (door_edge0=-1) -> 0.1:(waypoint'=0) & (door_edge0'=0) + 0.9:(waypoint'=0) & (door_edge0'=1);
[check_door0] (waypoint=1) & (door_edge0=-1) -> 0.1:(waypoint'=1) & (door_edge0'=0) + 0.9:(waypoint'=1) & (door_edge0'=1);

[check_door1] (waypoint=1) & (door_edge1=-1) -> 0.1:(waypoint'=1) & (door_edge1'=0) + 0.9:(waypoint'=1) & (door_edge1'=1);
[check_door1] (waypoint=2) & (door_edge1=-1) -> 0.1:(waypoint'=2) & (door_edge1'=0) + 0.9:(waypoint'=2) & (door_edge1'=1);

endmodule

label "WayPoint1" = (waypoint=1);
label "WayPoint2" = (waypoint=2);
label "WayPoint0" = (waypoint=0);
label "WayPoint3" = (waypoint=3);
label "WayPoint4" = (waypoint=4);
label "WayPoint5" = (waypoint=5);
label "WayPoint6" = (waypoint=6);


rewards "time"

	[doorPassing_WayPoint1_WayPoint0] (waypoint=1) & (door_edge0=1):1.0;
	[doorPassing_WayPoint1_WayPoint2] (waypoint=1) & (door_edge1=1):1.0;

	[doorPassing_WayPoint2_WayPoint1] (waypoint=2) & (door_edge1=1):1.0;
	[doorPassing_WayPoint0_WayPoint1] (waypoint=0) & (door_edge0=1):1.0;

	[check_door0] (waypoint=0) & (door_edge0=-1):1.0;
	[check_door0] (waypoint=1) & (door_edge0=-1):1.0;

	[check_door1] (waypoint=1) & (door_edge1=-1):1.0;
	[check_door1] (waypoint=2) & (door_edge1=-1):1.0;

	[move_WayPoint1_WayPoint3] (waypoint=1):1.0;
	[move_WayPoint1_WayPoint4] (waypoint=1):1.0;
	[move_WayPoint1_WayPoint5] (waypoint=1):1.0;// -> 0.1:(waypoint'=6) + 0.9:(waypoint'=5);
	[move_WayPoint1_WayPoint6] (waypoint=1):1.0;// -> 0.1:(waypoint'=5) + 0.9:(waypoint'=6);
	
	[move_WayPoint6_WayPoint1] (waypoint=6):1.0;// -> 1.0:(waypoint'=1);	     
	[move_WayPoint5_WayPoint1] (waypoint=5):1.0;// -> 1.0:(waypoint'=1);
	[move_WayPoint4_WayPoint1] (waypoint=4):1.0;// -> 1.0:(waypoint'=1);
	[move_WayPoint3_WayPoint1] (waypoint=3):1.0;// -> 1.0:(waypoint'=1);

	[move_WayPoint6_WayPoint0] (waypoint=6):1.0;// -> 1.0:(waypoint'=0);
	[move_WayPoint5_WayPoint0] (waypoint=5):1.0;// -> 1.0:(waypoint'=0);
	[move_WayPoint4_WayPoint2] (waypoint=4):1.0;// -> 1.0:(waypoint'=2);
	[move_WayPoint3_WayPoint2] (waypoint=3):1.0;// -> 1.0:(waypoint'=2);

	[move_WayPoint0_WayPoint6] (waypoint=0):1.0;// -> 1.0:(waypoint'=6);
	[move_WayPoint0_WayPoint5] (waypoint=0):1.0;// -> 1.0:(waypoint'=5);
	[move_WayPoint2_WayPoint4] (waypoint=2):1.0;// -> 1.0:(waypoint'=4);
	[move_WayPoint2_WayPoint3] (waypoint=2):1.0;// -> 1.0:(waypoint'=3);

endrewards
